
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serving video stimuli &#8212; Continuous Rater</title>
    
  <link rel="stylesheet" href="../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Editing the utils.js file" href="../Customizing_the_app/Customizing_the_app_page1.html" />
    <link rel="prev" title="Building a stimuli table in Firebase" href="../Setting_up_firebase/Uploading_stimuli_page1.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Continuous Rater</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Intro.html">
   Introduction
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Getting started
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Getting_started/Getting_started_page1.html">
   Downloading the app
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Setting up firebase
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Setting_up_firebase/Setting_up_firebase_page1.html">
   Initializing Cloud Firestore
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Setting_up_firebase/Uploading_stimuli_page1.html">
   Building a stimuli table in Firebase
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Setting up stimuli
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Serving video stimuli
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Customizing the app
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Customizing_the_app/Customizing_the_app_page1.html">
   Editing the utils.js file
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Customizing_the_app/Running_in_dev_mode_page1.html">
   Using development mode
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Using the app
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Using_the_app/Building_the_website_page1.html">
   Creating the website
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Using_the_app/Using_the_app_mturk_page1.html">
   Using the app with Amazon MTurk
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Getting the data from firebase
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Getting_the_data_from_firebase/Getting_the_data_from_firebase_page1.html">
   Pulling data from firebase
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Contact
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Contact/Contact_page1.html">
   Contact
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/Serving_video_stimuli/Serving_video_stimuli_localhost_page1.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-basics">
   The basics
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#testing-with-local-files">
   Testing with local files
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-aws-for-serving">
   Using AWS for serving
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#quick-tips">
   Quick tips
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="serving-video-stimuli">
<h1>Serving video stimuli<a class="headerlink" href="#serving-video-stimuli" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-basics">
<h2>The basics<a class="headerlink" href="#the-basics" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">continuous-rater</span></code> relies on served audio/video stimuli. You can use a local server for your stimuli, or rely on web services provided by companies like Amazon and Google. <strong>I recommend against using Google Firebase to store and serve stimuli due to slow load times and issues with latency</strong> but the app is compatible with this option.</p>
<p>Whether you use a local server or a cloud-based option, there are several important steps that need to be taken to ensure optimal results:</p>
<ol class="simple">
<li><p><strong>Set up a Content Delivery Network (CDN)</strong> that will cache your stimuli content at the network edge and ensure fast and reliable delivery of audio/video. A CDN can (and should) be used with a cloud server or a local server and leads to significantly decreased buffer and load times. To learn more about CDNs in general, click <a class="reference external" href="https://www.cloudflare.com/learning/cdn/what-is-a-cdn/">here</a>.<p> </p></p></li>
<li><p><strong>Name your files without special characters or spaces</strong> to ensure compatibility with <code class="docutils literal notranslate"><span class="pre">continuous-rater</span></code>. For example, if a video stimulus is called <strong>Cops Don’t Cry</strong> and is in the <code class="docutils literal notranslate"><span class="pre">.mp4</span></code> format, name the file <strong>CopsDontCry.mp4</strong>, removing all special characters and spaces. These exact names are used in the stimuli table your Firebase database, so simpler is better.</p></li>
</ol>
</div>
<div class="section" id="testing-with-local-files">
<h2>Testing with local files<a class="headerlink" href="#testing-with-local-files" title="Permalink to this headline">¶</a></h2>
<p>When testing the app locally, it can be helpful to use stimuli directly available on your computer rather than dealing with storage, serving and CDNs. To accomplish this, when you create your stimuli table in Firebase (see Building a stimuli table in Firebase), fill in the local absolute path to a video stimulus (e.g. ‘/Users/maxf/Desktop/videos/MOVIE_NAME.mp4’) in lieu of a URL.</p>
</div>
<div class="section" id="using-aws-for-serving">
<h2>Using AWS for serving<a class="headerlink" href="#using-aws-for-serving" title="Permalink to this headline">¶</a></h2>
<p>When it comes time to build the app for real data collection, you will need to serve your stimuli. I highly recommend against serving stimuli on a local server due to issues surrounding reliability/scalability (but the app will still function if you choose to do so). Instead, I recommend using <strong><a class="reference external" href="https://aws.amazon.com/s3/">AWS S3</a> to store videos and <a class="reference external" href="https://aws.amazon.com/cloudfront/">AWS CloudFront</a> (CDN) to deliver content to end-users</strong>.</p>
<p>First, create an S3 storage bucket, and upload all video stimuli into that bucket. Then, create a CloudFront distribution that points to that S3 bucket. Read the docs (<a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/gsg/GetStartedWithS3.html">S3</a> and <a class="reference external" href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Introduction.html">CloudFront</a>) to get started. <strong>Click <a class="reference external" href="https://aws.amazon.com/cloudfront/streaming/">here</a> for a very helpful video-streaming tutorial</strong> using this AWS stack.</p>
<p>If you use this option, you can also easily integrate <a class="reference external" href="https://aws.amazon.com/mediaconvert/">AWS MediaConvert</a> to control file size, resolution and many other parameters related to your video stimuli.</p>
</div>
<div class="section" id="quick-tips">
<h2>Quick tips<a class="headerlink" href="#quick-tips" title="Permalink to this headline">¶</a></h2>
<ol>
<li><p><strong>Lower resolution = faster streaming</strong>. I recommend converting all videos to 480p and .mp4 format for simple and reliable streaming (unless resolution is important to your study). You can either do this locally, or use <a class="reference external" href="https://aws.amazon.com/mediaconvert/">AWS MediaConvert</a> to convert videos already uploaded to S3 storage (but then make sure your CDN points to these converted videos, not the originals!). <code class="docutils literal notranslate"><span class="pre">continuous-rater</span></code> is not currently compatible with the HLS protocol.<p> </p></p></li>
<li><p><strong>Check your files permissions</strong>. If using AWS S3 (or any other cloud storage solution) ensure that the storage bucket containing your media (as well as the media itself) allows the necessary read access permissions, otherwise your CDN will not be able to serve your stimuli properly, and <code class="docutils literal notranslate"><span class="pre">continuous-rater</span></code> will not be able to display your videos.<p> </p></p></li>
<li><p><strong>Validate streaming functionality early</strong>. You can check to ensure your streaming is working by appending a stimulus filename to the host or CDN url. Use this url to watch the clip directly in your browser. <p> </p></p>
<p>For example, if my CDN is <span class="xref myst">https://dfhda873u.cloudfront.net/</span> and my video is CopsDontCry.mp4, then I can test my distribution chain using <span class="xref myst">https://dfhda873u.cloudfront.net/CopsDontCry.mp4</span>. Once validated, add your stimuli to the stimuli table in Firebase by providing name/url pairings (e.g. CopsDontCry in the Field category and <span class="xref myst">https://dfhda873u.cloudfront.net/CopsDontCry.mp4</span> in the Value category).</p>
</li>
</ol>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./Serving_video_stimuli"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="../Setting_up_firebase/Uploading_stimuli_page1.html" title="previous page">Building a stimuli table in Firebase</a>
    <a class='right-next' id="next-link" href="../Customizing_the_app/Customizing_the_app_page1.html" title="next page">Editing the utils.js file</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The Jupyter Book community<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>